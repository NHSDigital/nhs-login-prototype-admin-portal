{% extends 'layout-nav.html' %}
{% set pageSection = "Manage user notifications" %}
{% block pageTitle %}
NAM not working as expected
{% endblock %}

<!-- this page is only visible to prod-accessreport group -->

{% block beforeContent %}
  <nav class="nhsuk-breadcrumb" aria-label="Breadcrumb">
    <div class="nhsuk-width-container">
      <ol class="nhsuk-breadcrumb__list">
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="manage-user-alerts">Manage user alerts</a></li>
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="incident-details">Incident details</a></li>
        <li class="nhsuk-breadcrumb__item">NAM incident</li>
      </ol>
    </div>
  </nav>
{% endblock %}



{% block headCSS %}
  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/nhsuk.css" rel="stylesheet">
{% endblock %}



{% block content %}

<style>

a:visited { 
    color:	#005eb8; 
}
</style>

<div class="nhsuk-grid-row" id="displaySpinner" style="display:none;">
  <div class="nhsuk-width-container">
     <h1 class="nhsuk-heading-l">Turning on user alerts</h1>
 
  <form action="auth" method="post">
    <section class="loading-container" id="gp-connect-0" style="display:block; min-height: 16em;">
  
      <div class="bar_container">
        <div id="main_container">
          <div id="pbar" class="progress-spinner" data-percent="0">
            <img src="/images/loader-spinner.svg" width="200px" height="200px" id="spinner" class=""/>
            <div class="ppc-loading">
              <div class="pcc-percents-wrapper">
                <span id="spinner-status" class="nhsuk-body">Loading</span><span aria-hidden="true">...</span>
              </div>
            </div>
          </div>
        </div>
      </div>
  
    </section>
  </form>

</div>
</div>


<div id="mainContent">

  <div class="nhsuk-grid-row">

    <div class="nhsuk-grid-column-full">
      <h1 class="nhsuk-heading-l" style="line-height: 100%;">NAM is not working as expected</h1>  
    </div>
    <div class="nhsuk-grid-column-two-thirds nhsuk-u-margin-top-4">
        <p >
          This might be due to a network or a technical issue regardless of user volume. Some users might have problems accessing the affected journeys.
        </p>
          <details class="nhsuk-details ">
            <summary class="nhsuk-details__summary">
              <span class="nhsuk-details__summary-text">
                Journeys affected
              </span>
            </summary>
            <div class="nhsuk-details__text">
              <ul class="nhsuk-list nhsuk-list--bullet">
                <li>IDVM</li>
                <li>POL</li>
                <li>GP Connect</li>
              </ul>
            </div>
          </details>
          <details class="nhsuk-details ">
            <summary class="nhsuk-details__summary">
              <span class="nhsuk-details__summary-text">
                Users affected
              </span>
            </summary>
            <div class="nhsuk-details__text">
              <ul class="nhsuk-list nhsuk-list--bullet">
                <li>new users registering for the first time</li>
                <li>existing users who don't have gp credentials when accessing a client that requires GP Connect</li>
                <li>existing users uplifting to P5/ P9</li>
              </ul>
            </div>
          </details>
    </div>
  </div>


<div class="nhsuk-grid-row" style="display:none;">
      <div class="nhsuk-grid-column-full nhsuk-u-margin-top-4">
        <h1 class="nhsuk-heading-l">User alerts</h1>
      </div> 
</div>
      

<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-two-thirds nhsuk-u-margin-top-4" >
    <div class=" nhsuk-u-padding-0">
      <h2 class="alert-header-tab-selected nhsuk-u-padding-left-4" id="global-alert" style="text-align: left;">
        Global alert
      </h2>
    </div>
  </div>
</div>


<div class="nhsuk-grid-row " >
  <div class="nhsuk-grid-column-two-thirds" >
   <div id="globalalert" style=" display:block; border-bottom: 1px solid #d8dde0;  border-right: 1px solid #d8dde0; border-left: 1px solid #d8dde0; background-color: #fff;">
        <div class="nhsuk-grid-row nhsuk-u-padding-4">
          <div class=" nhsuk-u-padding-left-4 nhsuk-u-padding-right-4" >
            <div class=" nhsuk-u-padding-bottom-4" style="background-color: #fad9d7; padding:16px; border:1px solid #8A1538;">
              <div class="" aria-labelledby="error-summary-title" role="service status information" tabindex="-1" >
                <div class=" " style="display:flex; flex-direction:row;">
                  <div>
                    <span class="nhsuk-warning-text__icon_global" aria-hidden="true" >!</span>
                  </div>
                  <div class="nhsuk-u-margin-left-4" aria-labelledby="error-summary-title" role="alert" tabindex="-1" >
                    <div>
                      <h1 class="nhsuk-error-summary__title nhsuk-heading-l" style=" padding-right: 16px;" id="error-summary-title">
                        There is a problem with the service
                      </h1>
                    <div id="show-details" style="display:none; padding-bottom: 16px;" class="nhsuk-u-font-size-19">
                      <a href="#" onclick="ExpandBanner()" class="nhsuk-link nhsuk-link--no-visited-state">Show details</a>
                    </div>
                    </div>
                    <div class="" id="BannerContent" style="display:block;">
                      <div class="nhsuk-error-summary__body">
                        <p> 
                          We are working to fix a technical issue with NHS login.
                        </p>
                        <p> 
                          This could affect your access to the service.
                        </p>
                        <p>
                          If you are registering with NHS login for the first time, it may take longer than usual to check your information.
                        </p>
            
                      </div>
                      <div class="nhsuk-u-padding-bottom-2" style="pointer-events:none;" id="MinimiseBanner">
                        <a href="#" class="nhsuk-link nhsuk-link--no-visited-state nhsuk-u-font-size-19" id="MinimiseBanner" onclick="MinimiseBanner()">
                          Hide this message
                        </a>
                      </div>
                    </div>
                  </div>
                </div>           
            </div>
            </div>
          </div>
        </div>     
    </div>
  </div>
</div>





<div class="nhsuk-grid-row nhsuk-u-margin-top-6">
  <div class="nhsuk-grid-column-full" >
  <form>
    <button class="nhsuk-button" type="submit" id="turnOnAlerts" >
      Turn on user alerts for this incident
    </button>
    <p class="nhsuk-hint" style="line-height:0%;">User alerts will be active immediately and displayed on affected journeys</p>
  </form>
</div>
</div>

<div class="nhsuk-back-link nhsuk-u-margin-top-4">
  <a class="nhsuk-back-link__link" href="incident-details">
    <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
      <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
    </svg>
    Back to: Confirm incident details</a>
</div>

</div>


<script>
// get the button element
const button = document.getElementById('turnOnAlerts');

// add an event listener to the button
button.addEventListener('click', function(event) {
  // prevent the default form submission behavior
  event.preventDefault();

  // show the spinner
  document.getElementById("displaySpinner").style.display = "block";
  document.getElementById("mainContent").style.display = "none";

  // redirect the user to the next page after a delay of 5 seconds
  setTimeout(function() {
    window.location.href = 'complete';
  }, 2500); // 5000 milliseconds = 5 seconds
});

</script>



  
{% endblock %}


