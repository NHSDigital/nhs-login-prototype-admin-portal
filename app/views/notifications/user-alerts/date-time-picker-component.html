{% extends 'layout-nav.html' %}
{% set pageSection = "Edit user notifications" %}

<!-- this page is only visible to prod-accessreport group -->

{% block beforeContent %}
  <nav class="nhsuk-breadcrumb" aria-label="Breadcrumb">
    <div class="nhsuk-width-container">
      <ol class="nhsuk-breadcrumb__list">
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="/notifications">Edit user notifications</a></li>
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="/notifications/user-alerts/manage-user-alerts">Manage user alerts</a></li>
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="/notifications/user-alerts/schedule-user-alert/select-incident">Incident categories</a></li>
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="/notifications/user-alerts/schedule-user-alert/select-incident/supplier-incidents">Supplier incidents</a></li>
        <li class="nhsuk-breadcrumb__item">Incident details</li>
      </ol>
    </div>
  </nav>
{% endblock %}

{% block headCSS %}
  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/nhsuk.css" rel="stylesheet">


{% endblock %}

{% block content %}

<style>


	.inp-wrapper {
	  display: flex;
	  gap: 3em;
	}

	label {
	  color: #212b32;
	  display: block;
	}


	.datestart {
	  font-size: 19px;
	  padding: 16px;
	  color: #212b32;
	  border:transparent solid 2px;
	  outline: transparent solid 2px;
	  border-radius: 0.2em;
	  margin-top: 0.6em;
	  box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 5px 0px, rgba(0, 0, 0, 0.1) 0px 0px 1px 0px;
	}

	.datestart.default {
	  font-size: 19px;
	  padding: 1em;
	  color: #212b32;
	  border:transparent solid 2px;
	  outline: transparent solid 2px;
	  border-radius: 0.2em;
	  margin-top: 0.6em;
	  box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 5px 0px, rgba(0, 0, 0, 0.1) 0px 0px 1px 0px;
	}

	.datestart:focus{
		border: 2px solid 	#212b32;
  		outline: 2px solid 	#ffeb3b;
	}

	.dateend {
	  font-size: 19px;
	  padding: 16px;
	  color: #212b32;
	  border:transparent solid 2px;
	  outline: transparent solid 2px;
	  border-radius: 0.2em;
	  margin-top: 0.6em;
	  box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 5px 0px, rgba(0, 0, 0, 0.1) 0px 0px 1px 0px;
	}

	.dateend.default {
	  font-size: 19px;
	  padding: 16px;
	  color: #212b32;
	  border:transparent solid 2px;
	  outline: transparent solid 2px;
	  border-radius: 0.2em;
	  margin-top: 0.6em;
	  box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 5px 0px, rgba(0, 0, 0, 0.1) 0px 0px 1px 0px;
	}

	.dateend:focus{
		border: 2px solid 	#212b32;
  		outline: 2px solid 	#ffeb3b;
	}



	::-webkit-calendar-picker-indicator {
	  background-color: #d8dde0;
	  padding: 0.2em;
	  cursor: pointer;
	  border-radius: 0.1em;
	  
	}
.dates {
  display: none;
  background-color: #FFF;
  width: 80%;
  height: 100%;
  margin-top: 24px;
  margin-bottom: 24px;
}

.dates2 {
  display: none;
  background-color: #FFF;
  width: 80%;
  height: 100%;
  margin-top: 24px;
  margin-bottom: 24px;
}

.dates.active {
  display: block;
  float: left;
  width: 80%;
  height: 100%;

  box-shadow: rgba(0, 0, 0, 0.1) 0px 0px 5px 0px, rgba(0, 0, 0, 0.1) 0px 0px 1px 0px;
}

.dates .month {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px solid 	#d8dde0;
  color: #212b32;
  font-size: 19px;
  padding-top: 8px;
  padding-bottom: 8px;
  
}

.dates2 .month2 {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px solid 	#d8dde0;
  color: #212b32;
  font-size: 19px;
  padding-top: 8px;
  padding-bottom: 8px;
  
}

.dates .month .arrows {
	width: 35px;
	height: 35px;
	display: flex;
	justify-content: center;
	align-items: center;
	color: #212b32;
	font-size: 22px;
}

.dates2 .month2 .arrows2 {
	width: 35px;
	height: 35px;
	display: flex;
	justify-content: center;
	align-items: center;
	color: #212b32;
	font-size: 22px;
}

.dates .month .arrows:hover {
  background-color: #d8dde0;
  color: #212b32;
}

.dates .month .arrows:active {
  background-color: #d8dde0;
  color: #212b32;
}

.dates .days {
	display: grid;
	grid-template-columns: repeat(7, 1fr);
	height: 200px;
	width: 100%;
	cursor: pointer;
}

.dates2 .days2 {
	display: grid;
	grid-template-columns: repeat(7, 1fr);
	height: 200px;
	width: 100%;
	cursor: pointer;
}

.dates .days .day { 
	display: flex;
	justify-content: center;
	align-items: center;
	color: #212b32;

    font-size:19px;
}

.dates2 .days2 .day2 { 
	display: flex;
	justify-content: center;
	align-items: center;
	color: #212b32;

    font-size:19px;
}

.dates .days .day:hover {
	background-color: #d8dde0;
}

.dates2 .days2 .day2:hover {
	background-color: #d8dde0;
}

.dates .days .day.selected {
	background-color: #212b32;
    color:#FFF;
}

.dates2 .days2 .day2.selected2 {
	background-color: #212b32;
    color:#FFF;
}

.dates .days .day.selected:hover {
	background-color: #212b32;
    color:#FFF;
}

.dates2 .days2 .day2.selected2:hover {
	background-color: #212b32;
    color:#FFF;
}

	
</style>



		

<div class="nhsuk-back-link">
	<a class="nhsuk-back-link__link" href="#">
	  <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" height="24" width="24">
		<path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
	  </svg>
	  Back to: Is it a planned service maintenance?
	</a>
</div>




<div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-two-thirds nhsuk-u-margin-top-4">
		<h1 class="nhsuk-heading-s nhsuk-u-margin-top-4" style="color: 	#4c6272">NAM incident</h1>
        <h1 class="nhsuk-heading-l">When is it scheduled to happen?</h1>
    </div>
  </div>

<div class="nhsuk-grid-row nhsuk-u-margin-top-4">
	<div class="nhsuk-grid-column-one-half" >
  
	  <h1 class="nhsuk-heading-m">Start:</h1>
	</div>
</div> 


<div class="nhsuk-grid-row nhsuk-u-margin-top-2">
	<div class="nhsuk-grid-column-one-half">


		<div class="inp-wrapper">
		<div class="date-wrapper" id="date1">
			<label class="nhsuk-label" for="date-1">Date</label>
			<input class="selected-date datestart" type="text" placeholder="DD/MM/YYYY" id="datestart" />
		</div>

		<div class="date-wrapper" id="date1">
			<label class="nhsuk-label" for="date-1">Time</label>
			<select class="datestart">
				<option selected>--:--</option>
				<option>00:00</option>
				<option>00:30</option>
				<option>01:00</option>
				<option>01:30</option>
			</select>
		</div>
		
		
		</div>


		<div class="dates nhsuk-u-margin-top-4" id="calendar" style="display:none;">
			<div class="month">
			  <div class="arrows prev-mth">&lt;</div>
			  <div class="mth"></div>
			  <div class="arrows next-mth">&gt;</div>
			</div>
		
			<div id="date-selected" class="days dates"></div>
		</div>

		
	</div>
</div>

<div class="nhsuk-grid-row nhsuk-u-margin-top-6">
	<div class="nhsuk-grid-column-one-half" >
  
	  <h3 class="nhsuk-heading-s">End:</h3>
	</div>
</div> 

<div class="nhsuk-grid-row nhsuk-u-margin-top-2 " >
	<div class="nhsuk-grid-column-one-half">
		<div class="inp-wrapper ">
			<div class="date-wrapper" id="date2">
				<label  class="nhsuk-label" for="date-2">Date</label>
				<input class="selected-date dateend removedate" type="text" placeholder="DD/MM/YYYY" id="dateend" />
			</div>
			<div class="date-wrapper" id="date1">
				<label class="nhsuk-label" for="date-1">Time</label>
				<select class="dateend removedate">
					<option selected>--:--</option>
					<option>00:00</option>
					<option>00:30</option>
					<option>01:00</option>
					<option>01:30</option>
				</select>
			</div>
			
		</div>

		<div class="dates2 nhsuk-u-margin-top-4" id="calendar2" style="display:;">
			<div class="month2">
			  <div class="arrows2 prev-mth2">&lt;</div>
			  <div class="mth2"></div>
			  <div class="arrows2 next-mth2">&gt;</div>
			</div>
		
			<div id="date-selected2" class="days2 dates2"></div>
		</div>

	</div>
</div>


<div class="nhsuk-grid-row nhsuk-u-margin-top-4" >
	<div class="nhsuk-grid-column-one-half">
		<div class="nhsuk-checkboxes__item">
			<input onclick="skip()" class="nhsuk-checkboxes__input" id="skip-date" name="example" type="checkbox" value="email">
			<label class="nhsuk-label nhsuk-checkboxes__label nhsuk-hint" for="example-1">
				End date and time is unknown
			</label>
		</div>
	</div>
</div>


<div class="nhsuk-grid-row nhsuk-u-margin-top-4">
	<div class="nhsuk-grid-column-one-half">
		<form action="confirm-choices" method="post">
			<button class="nhsuk-button" type="submit">
			  Continue
			</button>
		  </form>
	</div>
</div>


</div>
</div>

<script>


function skip() {
  if (document.getElementById("skip-date").checked) {
    disableForm(true);
  }
  if (!document.getElementById("skip-date").checked) {
    disableForm(false);
  }

}

function disableForm(flag) {
  var elements = document.getElementsByClassName("removedate");
  for (var i = 0, len = elements.length; i < len; ++i) {
    elements[i].readOnly = flag;
    elements[i].disabled = flag;
  }
}


const targetDiv = document.getElementById("calendar");
const targetDiv2 = document.getElementById("calendar2");
const input1 = document.getElementById("datestart");
const input2 = document.getElementById("dateend");
const date1 = document.getElementById("date1");
const date2 = document.getElementById("date2");
const btn3 = document.getElementById("date-selected");

date1.onclick = function () {
  if (targetDiv.style.display !== "block") {
    targetDiv.style.display = "block";
  } else {
    targetDiv.style.display = "none";
  }
};
date2.onclick = function () {
	if (targetDiv.style.display = "none") {
    targetDiv2.style.display = "block";
  } else {
    targetDiv2.style.display = "none";
  }
};
btn3.onclick = function () {
  if (targetDiv.style.display !== "none") {
    targetDiv.style.display = "none";
  } else {
    targetDiv.style.display = "block";
  }
  document.getElementById("datestart").placeholder ='02/02/2022'
};

</script>


<script>


	const date_picker_element = document.querySelector('.date-wrapper');
	const selected_date_element = document.querySelector('.selected-date');
	const dates_element = document.querySelector('.dates');
	const mth_element = document.querySelector('.dates .month .mth');
	const next_mth_element = document.querySelector('.dates .month .next-mth');
	const prev_mth_element = document.querySelector('.dates .month .prev-mth');
	const days_element = document.querySelector('.dates .days');
	
	
	
	const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
	
	let date = new Date();
	let day = date.getDate();
	let month = date.getMonth();
	let year = date.getFullYear();
	
	let selectedDate = date;
	let selectedDay = day;
	let selectedMonth = month;
	let selectedYear = year;
	
	mth_element.textContent = months[month] + ' ' + year;
	
	selected_date_element.textContent = formatDate(date);
	selected_date_element.dataset.value = selectedDate;
	
	populateDates();
	
	// EVENT LISTENERS
	date_picker_element.addEventListener('click', toggleDatePicker);
	next_mth_element.addEventListener('click', goToNextMonth);
	prev_mth_element.addEventListener('click', goToPrevMonth);
	
	// FUNCTIONS
	function toggleDatePicker (e) {
		if (!checkEventPathForClass(e.path, 'dates')) {
			dates_element.classList.toggle('active');
		selected_date_element.classList.toggle('active');
		}
	}
	
	function goToNextMonth (e) {
		month++;
		if (month > 11) {
			month = 0;
			year++;
		}
		mth_element.textContent = months[month] + ' ' + year;
		populateDates();
	}
	
	function goToPrevMonth (e) {
		month--;
		if (month < 0) {
			month = 11;
			year--;
		}
		mth_element.textContent = months[month] + ' ' + year;
		populateDates();
	}
	
	function populateDates (e) {
		days_element.innerHTML = '';
		let amount_days = 31;
	
		if (month == 1) {
			amount_days = 28;
		}
	
		for (let i = 0; i < amount_days; i++) {
			const day_element = document.createElement('div');
			day_element.classList.add('day');
			day_element.textContent = i + 1;
	
			if (selectedDay == (i + 1) && selectedYear == year && selectedMonth == month) {
				day_element.classList.add('selected');
			}
	
			day_element.addEventListener('click', function () {
				selectedDate = new Date(year + '-' + (month + 1) + '-' + (i + 1));
				selectedDay = (i + 1);
				selectedMonth = month;
				selectedYear = year;
	
				selected_date_element.textContent = formatDate(selectedDate);
				selected_date_element.dataset.value = selectedDate;
	
				populateDates();
			});
	
			days_element.appendChild(day_element);
		}
	}
	
	// HELPER FUNCTIONS
	function checkEventPathForClass (path, selector) {
		for (let i = 0; i < path.length; i++) {
			if (path[i].classList && path[i].classList.contains(selector)) {
				return true;
			}
		}
		
		return false;
	}
	function formatDate (d) {
		let day = d.getDate();
		if (day < 10) {
			day = '0' + day;
		}
	
		let month = d.getMonth() + 1;
		if (month < 10) {
			month = '0' + month;
		}
	
		let year = d.getFullYear();
	
		return day + ' / ' + month + ' / ' + year;
	}
	
	
</script>   


        
{% endblock %}


