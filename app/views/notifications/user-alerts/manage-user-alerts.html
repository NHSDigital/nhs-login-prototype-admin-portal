{% extends 'layout-nav.html' %}
{% set pageSection = "Edit user notifications" %}

{% block beforeContent %}
  <nav class="nhsuk-breadcrumb" aria-label="Breadcrumb">
    <div class="nhsuk-width-container">
      <ol class="nhsuk-breadcrumb__list">
        <li class="nhsuk-breadcrumb__item"><a class="nhsuk-breadcrumb__link" href="/notifications">Edit user notifications</a></li>
        <li class="nhsuk-breadcrumb__item">Manage user alerts</li>
      </ol>
    </div>
  </nav>
{% endblock %}

{% block headCSS %}
  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/nhsuk.css" rel="stylesheet">
{% endblock %}

{% block content %}


<style>
   a:visited { 
    color:	#005eb8; 
    }

    /* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding: 1.5em; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0, 0, 0, 0.685); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  max-width: 640px;
  overflow: auto;
  overflow-x: hidden;
  padding: 1.5em;
  position: relative;
  width: 100%;
  height:fit-content;
}

</style>

<div class="nhsuk-grid-row">

  <div class="nhsuk-grid-column-full">
      <h1 class="nhsuk-heading-l">Manage user alerts</h1>

      <ul class="nhsuk-grid-row nhsuk-card-group nhsuk-u-padding-top-0">


    <div class="nhsuk-grid-column-one-half" id="turn-alert-on" style="{% if data.active === 'true' %} display: none;{% else %} display:block;{% endif %}">
          <li class="beta-hub-main-topic nhsuk-card-group__item">
            <div class="nhsuk-card nhsuk-card--clickable ">
              <div class="nhsuk-card__content beta-card__content">
                  <a class="nhsuk-card__link"  href="turn-on-user-alert/select-incident">
                    <b>Turn on a user alert</b>
                  </a>
                {# <div class="nhsuk-card__description"><p>Hac habitasse platea dictumst quisque sagittis purus sit amet.</p></div> #}
                <div class="beta-hub-arrow">
                  <svg class="nhsuk-icon beta-icon__chevron-right-circle" xmlns="http://www.w3.org/2000/svg" width="27" height="27" aria-hidden="true"><circle cx="13.333" cy="13.333" r="13.333" fill=""/><g data-name="Group 1" fill="none" stroke="#fff" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2.667"><path d="M15.438 13l-3.771 3.771"/><path data-name="Path" d="M11.667 9.229L15.438 13"/></g></svg>
                </div>
              </div>
            </div>
          </li>
    </div>

</div>
</div>

<div class="nhsuk-grid-row nhsuk-u-margin-top-6" id="active" style="{% if data.active === 'true' %} display: block;{% else %} display:none;{% endif %}">

  <div class="nhsuk-grid-column-full">
    <h2 class="nhsuk-heading-m">Active user alerts</h2>

      <ul class="nhsuk-grid-row nhsuk-card-group nhsuk-u-padding-top-0">


    <div class="nhsuk-grid-column-one-half">
          <li class="beta-hub-main-topic nhsuk-card-group__item">
            <div class="nhsuk-card nhsuk-card ">
              <div class="nhsuk-card__content beta-card__content">
                <h3 class="nhsuk-heading-xs">
                  {% if data.namplanned === 'true' %}
                  <b>Planned service maintenance: NAM is not working properly</b>
                  {% endif %}
                  {% if data.namplanned === 'false' %}
                  <b>NAM is not working properly</b>
                  {% endif %}
                  {% if data.namdownplanned === 'true' %}
                  <b>Planned service maintenance: NAM is down</b>
                  {% endif %}
                  {% if data.namdownplanned === 'false' %}
                  <b>NAM is down</b>
                  {% endif %}
                </h3>
                <div class="nhsuk-card__description nhsuk-u-margin-top-0"><p>Start date: 02 February 2023, 08:00</p></div>
                <div class="nhsuk-card__description nhsuk-u-margin-top-0">
                  {% if data.incidentnumber === 'false' %}
                  <a href="turn-on-user-alert/supplier-incidents/service-down/incident-number?incidentnumber=false" 
                    class="nhsuk-link">Add a support reference number
                  </a>
                  {% else %}
                  <a href="#" class="nhsuk-link">View details on Splunk</a>
                  {% endif %}
                </div>
                <div class="nhsuk-card__description nhsuk-u-margin-top-6 nhsuk-u-margin-bottom-6">
                  <a class="nhsuk-u-padding-right-4"  href="edit-user-alert/edit" style=" text-decoration: none; border-right: 1px solid; border-right: 1px solid; cursor:pointer;">Edit</a> 
                  <a class="nhsuk-u-padding-left-4" id="openModal" style="cursor:pointer;" >Turn off</a>
                </div>
                <hr class="nhsuk-section-break nhsuk-section-break--m nhsuk-section-break--visible">
                <p class="nhsuk-hint">Turned on by:</p>
                <p class="nhsuk-hint">Admin Name on 02 February 2023</p>
              </div>
            </div>
          </li>
          
    </div>

</div>
</div>

<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <div id="alert-off-confirm" style="display:block;">
      {% if data.namplanned === 'true' %}
      <h1 class="nhsuk-heading-m">Confirm you want to turn off user alert for incident: Planned service maintenance: NAM is not working properly</h1>
      {% endif %}
      {% if data.namplanned === 'false' %}
      <h1 class="nhsuk-heading-m">Confirm you want to turn off user alert for incident: NAM is not working properly</h1>
      {% endif %}
      {% if data.namdownplanned === 'true' %}
      <h1 class="nhsuk-heading-m">Confirm you want to turn off user alert for incident: Planned service maintenance: NAM is down</h1>
      {% endif %}
      {% if data.namdownplanned === 'false' %}
      <h1 class="nhsuk-heading-m">Confirm you want to turn off user alert for incident: NAM is down</h1>
      {% endif %} 
    <p class="" style="display:;">All in journey alerts for this incident will be removed</span></p>
    <div class="nhsuk-form-group nhsuk-u-margin-top-4" >
                  
      <fieldset class="nhsuk-fieldset" aria-describedby="example-hint">

          <div class="nhsuk-checkboxes">
  
              <div class="nhsuk-checkboxes__item">
                  <input class="nhsuk-checkboxes__input" onclick="conFirm();" id="confirm" name="example" type="checkbox" value="">
                  {% if data.namplanned === 'true' %}
                  <label class="nhsuk-label nhsuk-checkboxes__label " for="example-1">
                    Yes, I want to turn off user alert for incident: Planned service maintenance: NAM is not working properly
                  </label>
                  {% endif %}
                  {% if data.namplanned === 'false' %}
                  <label class="nhsuk-label nhsuk-checkboxes__label " for="example-1">
                    Yes, I want to turn off user alert for incident: NAM is not working properly
                  </label>
                  {% endif %}
                  {% if data.namdownplanned === 'true' %}
                  <label class="nhsuk-label nhsuk-checkboxes__label " for="example-1">
                    Yes, I want to turn off user alert for incident: Planned service maintenance: NAM is down
                  </label>
                  {% endif %}
                  {% if data.namdownplanned === 'false' %}
                  <label class="nhsuk-label nhsuk-checkboxes__label " for="example-1">
                    Yes, I want to turn off user alert for incident: NAM is down
                  </label>
                  {% endif %}  
              </div>
          </div>
      </fieldset>
    </div> 
    <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0" >
      <button class="nhsuk-button full-width nhsuk-u-margin-bottom-3 nhsuk-u-margin-top-0"  id="modal-link" style="width:100%;" 
      onclick="turnOff();" disabled="disabled">Turn off</button>
    </div>
    <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0" >
        <p class="nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-3 " style="display:inline-block;">
          <span class="close">
            <a  href="#" class="" id="">Cancel</a>
          </span>
        </p>
    </div>
  </div>
    <div style="display:none;" id="alert-off-feedback">
      <div style="display: flex;">
      <svg xmlns="http://www.w3.org/2000/svg" height="32px" width="32px" viewBox="0 0 512 512"><path fill="#212b32"d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0S0 114.6 0 256S114.6 512 256 512zM216 336h24V272H216c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24H216c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-144c-17.7 0-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32z"/></svg>
      <div class="nhsuk-u-padding-left-4">
        <h1 class="nhsuk-heading-m">User alert has been turned off for incident: NAM is down</h1>

        <div class="form-group nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0" >
          <p class="nhsuk-u-margin-bottom-0 nhsuk-u-margin-top-0 " style="display:inline-block;">
            <span class="">
              <a  href="/notifications/user-alerts/manage-user-alerts?active=false" class="close2" id="">Close</a>
            </span>
          </p>
        </div>
      </div>
      </div>
    </div>
  </div>

</div>

<script>
// Get the modal
var modal = document.getElementById("myModal");

// Get the button that opens the modal
var btn = document.getElementById("openModal");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// Get the <a> element that closes the feedback modal
  var a = document.getElementsByClassName("close2")[0];

// When the user clicks the button, open the modal 
btn.onclick = function() {
  modal.style.display = "flex";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
  let inputs = document.getElementById('confirm');
  inputs.checked = false;
  document.getElementById('modal-link').setAttribute("disabled", '')
}

// When the user clicks on <a> (x), close the modal
  a.onclick = function() {
  modal.style.display = "none";
  let inputs = document.getElementById('confirm');
  inputs.checked = false;
  document.getElementById('modal-link').setAttribute("disabled", '')
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
    let inputs = document.getElementById('confirm');
    inputs.checked = false;
    document.getElementById('modal-link').setAttribute("disabled", '')


    }
  
}

function conFirm() {
        if((document.getElementById('confirm').checked)) {
            document.getElementById('modal-link').removeAttribute("disabled")
        } else {
            document.getElementById('modal-link').setAttribute("disabled", '')
        }
}

function turnOff() {
        if((document.getElementById('confirm').checked)) {
            document.getElementById('alert-off-feedback').style.display = "block";
            document.getElementById('alert-off-confirm').style.display = "none";
            document.getElementById('active').style.display = "none";
            document.getElementById('turn-alert-on').style.display = "block";
        } else {
            document.getElementById('alert-off-feedback').style.display = "none";
            document.getElementById('alert-off-confirm').style.display = "block";
            document.getElementById('active').style.display = "block";
            document.getElementById('turn-alert-on').style.display = "none";
        }
}

</script>



 <!-- ------------------   Scheduling for future  ---------------------------
    -----------------------   Scheduling for future  ---------------------------
    -----------------------   Scheduling for future  ---------------------------

<div class="nhsuk-grid-row nhsuk-u-margin-top-6" style="{% if data.scheduled === 'true' %} display: block;{% else %} display:none;{% endif %}">

  <div class="nhsuk-grid-column-full">
    <h2 class="nhsuk-heading-m">Scheduled user alerts</h2>

      <ul class="nhsuk-grid-row nhsuk-card-group nhsuk-u-padding-top-0">


    <div class="nhsuk-grid-column-one-half">
          <li class="beta-hub-main-topic nhsuk-card-group__item">
            <div class="nhsuk-card nhsuk-card ">
              <div class="nhsuk-card__content beta-card__content">
                <h3 class="nhsuk-heading-xs">
                    <b>iProov is down</b>
                </h3>
                <div class="nhsuk-card__description nhsuk-u-margin-top-0"><p>Start date: 02 February 2023, 08:00</p></div> 
                <div class="nhsuk-card__description nhsuk-u-margin-top-0"><p>End date: Not set</p></div> 
                <div class="nhsuk-card__description nhsuk-u-margin-top-6"><a class="nhsuk-u-padding-right-4" >View details</a> <a class="nhsuk-u-padding-left-4 nhsuk-u-padding-right-4" style="border-left: 1px solid; border-right: 1px solid">Edit</a> <a class="nhsuk-u-padding-left-4">Cancel</a></div>
              </div>
            </div>
          </li>
          <p class="nhsuk-hint nhsuk-u-font-size-19">Scheduled by: Admin Name on 01 February 2023</p>
    </div>

</div>
</div>

-->

</div>


{% endblock %}



<!-- JavaScript hack to do nothing if search button or link href="" clicked -->
{% block pageScripts %}
<script>
  $( document ).ready(function() {
    $('a[href=""], button.nhsuk-search__submit').click(function(e) {
      e.preventDefault();
    });
  });
</script>
{% endblock %}